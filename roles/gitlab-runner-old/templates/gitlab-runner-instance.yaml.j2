apiVersion: apps.gitlab.com/v1beta2
kind: Runner
metadata:
  name: gitlab-runner
  namespace: {{ dsc.gitlab.namespace }}
spec:
  buildImage: alpine
{% if dsc.ingress.tls.type == 'tlsSecret' %}
  ca: {{ dsc.ingress.tls.tlsSecret.name }}
{% elif dsc.exposedCA.type != 'none' %}
  ca: exposed-ca
{% else %}
  ca: 
{% endif %}
  #config: custom-runner-config-toml
  env: custom-env
  gitlabUrl: https://{{ gitlab_domain }}/
  runUntagged: true
  tags: openshift
  token: gitlab-gitlab-runner-secret
  runnerImage: gitlab/gitlab-runner:alpine-v16.3.0
  helperImage: gitlab/gitlab-runner-helper:alpine-latest-x86_64-v16.3.0
